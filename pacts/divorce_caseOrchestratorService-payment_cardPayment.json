{
  "provider": {
    "name": "payment_cardPayment"
  },
  "consumer": {
    "name": "divorce_caseOrchestratorService"
  },
  "interactions": [
    {
      "description": "a request for information for that payment reference",
      "request": {
        "method": "GET",
        "path": "/card-payments/654321ABC",
        "headers": {
          "Authorization": "Bearer UserAuthToken",
          "ServiceAuthorization": "ServiceToken"
        }
      },
      "response": {
        "status": 200,
        "headers": {
          "Content-Type": "application/json; charset=UTF-8"
        },
        "body": {
          "ccd_case_number": "1547073120300616",
          "amount": 500,
          "fees": [
            {
              "volume": 1,
              "code": "FEE0002",
              "calculated_amount": 550,
              "version": "4"
            }
          ],
          "method": "card",
          "service_name": "Divorce",
          "channel": "online",
          "description": "Filing an application for a divorce, nullity or civil partnership dissolution \u2013 fees order 1.2.",
          "external_provider": "gov pay",
          "reference": "RC-1547-0733-1813-9545",
          "external_reference": "06kd1v30vm45hqvggphdjqbeqa",
          "site_id": "AA04",
          "payment_group_reference": "2019-15470733181",
          "currency": "GBP"
        },
        "matchingRules": {
          "body": {
            "$.amount": {
              "matchers": [
                {
                  "match": "number"
                }
              ],
              "combine": "AND"
            },
            "$.description": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.reference": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.ccd_case_number": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.channel": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.method": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.external_provider": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.external_reference": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.site_id": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.payment_group_reference": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.fees": {
              "matchers": [
                {
                  "match": "type",
                  "min": 0
                }
              ],
              "combine": "AND"
            },
            "$.fees[*].code": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.fees[*].version": {
              "matchers": [
                {
                  "match": "type"
                }
              ],
              "combine": "AND"
            },
            "$.fees[*].volume": {
              "matchers": [
                {
                  "match": "number"
                }
              ],
              "combine": "AND"
            },
            "$.fees[*].calculated_amount": {
              "matchers": [
                {
                  "match": "decimal"
                }
              ],
              "combine": "AND"
            }
          },
          "header": {
            "Content-Type": {
              "matchers": [
                {
                  "match": "regex",
                  "regex": "application/json(;\\s?charset=[\\w\\-]+)?"
                }
              ],
              "combine": "AND"
            }
          }
        }
      },
      "providerStates": [
        {
          "name": "A payment reference exists"
        }
      ]
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "3.0.0"
    },
    "pact-jvm": {
      "version": "4.1.11"
    }
  }
}
